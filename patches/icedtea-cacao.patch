--- ../icedtea6/openjdk/jdk/src/share/bin/java.c        2008-02-28 10:42:00.000000000 +0100
+++ openjdk/jdk/src/share/bin/java.c    2008-03-17 16:23:05.804846720 +0100
@@ -367,7 +367,8 @@
       args.classname = classname;
       args.ifn = ifn;
 
-      return ContinueInNewThread(JavaMain, threadStackSize, (void*)&args, ret);
+/*       return ContinueInNewThread(JavaMain, threadStackSize, (void*)&args, ret); */
+      return JavaMain((void*)&args);
     }
 }
 
diff -r 63b67d07d5e9 openjdk/jdk/make/common/shared/Compiler-gcc.gmk
--- ../openjdk/jdk/make/common/shared/Compiler-gcc.gmk	Tue Mar 25 16:27:33 2008 +0000
+++ openjdk/jdk/make/common/shared/Compiler-gcc.gmk	Wed Mar 26 08:24:35 2008 +0000
@@ -75,28 +75,51 @@ ifeq ($(PLATFORM), linux)
     REQUIRED_CC_VER = 3.2
     REQUIRED_GCC_VER = 3.2.*
   else
-  ifneq ("$(findstring sparc,$(ARCH))", "")
-    # sparc or sparcv9
-    REQUIRED_CC_VER = 4.0
-    REQUIRED_GCC_VER = 4.0.*
-  else
-  ifeq ($(ARCH_DATA_MODEL), 32)
+  ifeq ($(ARCH), alpha)
+    # alpha
+    REQUIRED_CC_VER = 3.2
+    REQUIRED_GCC_VER = 3.2.*
+  endif
+  ifeq ($(ARCH), amd64)
+    # amd64
+    REQUIRED_CC_VER = 3.2
+    REQUIRED_GCC_VER = 3.2.*
+  endif
+  ifeq ($(ARCH), arm)
+    # arm
+    REQUIRED_CC_VER = 3.2
+    REQUIRED_GCC_VER = 3.2.*
+  endif
+  ifeq ($(ARCH), i586)
     # i586
     REQUIRED_CC_VER = 3.2
     REQUIRED_GCC_VER = 3.2.1*
     REQUIRED_GCC_VER_INT = 3.2.1-7a
-  else
-  ifeq ($(ARCH), amd64)
-    # amd64
-    REQUIRED_CC_VER = 3.2
-    REQUIRED_GCC_VER = 3.2.*
   endif
   ifeq ($(ARCH), ia64)
     # ia64
     REQUIRED_CC_VER = 3.2
     REQUIRED_GCC_VER = 2.9[56789].*
   endif
+  ifeq ($(ARCH), mips)
+    # mips
+    REQUIRED_CC_VER = 3.2
+    REQUIRED_GCC_VER = 3.2.*
   endif
+  ifneq ("$(findstring ppc,$(ARCH))", "")
+    # ppc or ppc64
+    REQUIRED_CC_VER = 3.2
+    REQUIRED_GCC_VER = 3.2.*
+  endif
+  ifneq ("$(findstring s390,$(ARCH))", "")
+    # s390 or s390x
+    REQUIRED_CC_VER = 3.2
+    REQUIRED_GCC_VER = 3.2.*
+  endif
+  ifneq ("$(findstring sparc,$(ARCH))", "")
+    # sparc or sparcv9
+    REQUIRED_CC_VER = 4.0
+    REQUIRED_GCC_VER = 4.0.*
   endif
   endif
   # Option used to create a shared library
diff -r 63b67d07d5e9 openjdk/jdk/make/javax/sound/SoundDefs.gmk
--- ../openjdk/jdk/make/javax/sound/SoundDefs.gmk	Tue Mar 25 16:27:33 2008 +0000
+++ openjdk/jdk/make/javax/sound/SoundDefs.gmk	Wed Mar 26 08:29:28 2008 +0000
@@ -58,9 +58,45 @@ ifdef ICEDTEA_ZERO_BUILD
 ifdef ICEDTEA_ZERO_BUILD
   CPPFLAGS += -DX_ARCH=X_ZERO
 else
+  ifeq ($(ARCH), alpha)
+    CPPFLAGS += -DX_ARCH=X_ALPHA
+  endif # ARCH alpha
+
+  ifeq ($(ARCH), amd64)
+    CPPFLAGS += -DX_ARCH=X_AMD64
+  endif # ARCH amd64
+
+  ifeq ($(ARCH), arm)
+    CPPFLAGS += -DX_ARCH=X_ARM
+  endif # ARCH arm
+
   ifeq ($(ARCH), i586)
     CPPFLAGS += -DX_ARCH=X_I586
   endif # ARCH i586
+
+  ifeq ($(ARCH), ia64)
+    CPPFLAGS += -DX_ARCH=X_IA64
+  endif # ARCH ia64
+
+  ifeq ($(ARCH), mips)
+    CPPFLAGS += -DX_ARCH=X_MIPS
+  endif # ARCH mips
+
+  ifeq ($(ARCH), ppc)
+    CPPFLAGS += -DX_ARCH=X_PPC
+  endif # ARCH ppc
+
+  ifeq ($(ARCH), ppc64)
+    CPPFLAGS += -DX_ARCH=X_PPC64
+  endif # ARCH ppc64
+
+  ifeq ($(ARCH), s390)
+    CPPFLAGS += -DX_ARCH=X_S390
+  endif # ARCH s390
+
+  ifeq ($(ARCH), s390x)
+    CPPFLAGS += -DX_ARCH=X_S390X
+  endif # ARCH s390x
 
   ifeq ($(ARCH), sparc)
     CPPFLAGS += -DX_ARCH=X_SPARC
@@ -69,10 +105,6 @@ else
   ifeq ($(ARCH), sparcv9)
     CPPFLAGS += -DX_ARCH=X_SPARCV9
   endif # ARCH sparcv9
-
-  ifeq ($(ARCH), amd64)
-    CPPFLAGS += -DX_ARCH=X_AMD64
-  endif # ARCH amd64
 endif
 
 
diff -r 63b67d07d5e9 openjdk/jdk/src/share/native/com/sun/media/sound/SoundDefs.h
--- ../openjdk/jdk/src/share/native/com/sun/media/sound/SoundDefs.h	Tue Mar 25 16:27:33 2008 +0000
+++ openjdk/jdk/src/share/native/com/sun/media/sound/SoundDefs.h	Wed Mar 26 08:38:14 2008 +0000
@@ -33,12 +33,19 @@
 #define X_LINUX         3
 
 // types for X_ARCH
-#define X_I586          1
-#define X_SPARC         2
-#define X_SPARCV9       3
-#define X_IA64          4
-#define X_AMD64         5
-#define X_ZERO          6
+#define X_ALPHA         1
+#define X_AMD64         2
+#define X_ARM           3
+#define X_I586          4
+#define X_IA64          5
+#define X_MIPS          6
+#define X_PPC           7
+#define X_PPC64         8
+#define X_S390          9
+#define X_S390X         10
+#define X_SPARC         11
+#define X_SPARCV9       12
+#define X_ZERO          13
 
 // **********************************
 // Make sure you set X_PLATFORM and X_ARCH defines correctly.
--- openjdk/corba/make/common/shared/Platform.gmk~	2008-04-21 09:54:27.000000000 +0200
+++ openjdk/corba/make/common/shared/Platform.gmk	2008-04-21 16:14:54.000000000 +0200
@@ -224,9 +224,34 @@
   else
     # i586 is 32-bit, amd64 is 64-bit
     ifndef ARCH_DATA_MODEL
+      ifeq ($(ARCH), alpha)
+        ARCH_DATA_MODEL=64
+      endif
+      ifeq ($(ARCH), amd64)
+        ARCH_DATA_MODEL=64
+      endif
+      ifeq ($(ARCH), arm)
+        ARCH_DATA_MODEL=32
+      endif
       ifeq ($(ARCH), i586)
         ARCH_DATA_MODEL=32
-      else
+      endif
+      ifeq ($(ARCH), ia64)
+        ARCH_DATA_MODEL=64
+      endif
+      ifeq ($(ARCH), mips)
+        ARCH_DATA_MODEL=32
+      endif
+      ifeq ($(ARCH), ppc)
+        ARCH_DATA_MODEL=32
+      endif
+      ifeq ($(ARCH), ppc64)
+        ARCH_DATA_MODEL=64
+      endif
+      ifeq ($(ARCH), s390)
+        ARCH_DATA_MODEL=32
+      endif
+      ifeq ($(ARCH), s390x)
         ARCH_DATA_MODEL=64
       endif
     endif
--- openjdk/jdk/make/common/shared/Platform.gmk~	2008-04-21 09:54:27.000000000 +0200
+++ openjdk/jdk/make/common/shared/Platform.gmk	2008-04-21 16:15:00.000000000 +0200
@@ -235,9 +235,34 @@
   else
     # i586 is 32-bit, amd64 is 64-bit
     ifndef ARCH_DATA_MODEL
+      ifeq ($(ARCH), alpha)
+        ARCH_DATA_MODEL=64
+      endif
+      ifeq ($(ARCH), amd64)
+        ARCH_DATA_MODEL=64
+      endif
+      ifeq ($(ARCH), arm)
+        ARCH_DATA_MODEL=32
+      endif
       ifeq ($(ARCH), i586)
         ARCH_DATA_MODEL=32
-      else
+      endif
+      ifeq ($(ARCH), ia64)
+        ARCH_DATA_MODEL=64
+      endif
+      ifeq ($(ARCH), mips)
+        ARCH_DATA_MODEL=32
+      endif
+      ifeq ($(ARCH), ppc)
+        ARCH_DATA_MODEL=32
+      endif
+      ifeq ($(ARCH), ppc64)
+        ARCH_DATA_MODEL=64
+      endif
+      ifeq ($(ARCH), s390)
+        ARCH_DATA_MODEL=32
+      endif
+      ifeq ($(ARCH), s390x)
         ARCH_DATA_MODEL=64
       endif
     endif
--- openjdk/jdk/make/docs/Makefile~	2008-05-30 09:50:36.000000000 +0200
+++ openjdk/jdk/make/docs/Makefile	2008-07-02 14:26:54.306671792 +0200
@@ -58,7 +58,7 @@
 ifeq ($(ARCH_DATA_MODEL),64)
   MAX_VM_MEMORY = 1024
 else
-  MAX_VM_MEMORY = 512
+  MAX_VM_MEMORY = 768
 endif
 
 #
